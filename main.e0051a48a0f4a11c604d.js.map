{"version":3,"sources":["webpack:///./js/services/image-search-services.js","webpack:///./js/image-search.js","webpack:///./templates/image-card.hbs"],"names":["page","query","key","fetchImages","requestParams","this","fetch","then","response","json","parsedResponse","incrementPage","hits","catch","error","console","warn","string","resetPage","refs","searchForm","document","querySelector","gallery","button","image","insertListItems","images","markup","imageCard","insertAdjacentHTML","addEventListener","e","preventDefault","imageSearchServices","input","currentTarget","elements","innerHTML","serchQuery","value","window","scrollTo","top","scrollY","behavior","evt","basicLightbox","target","dataset","source","show","log","Handlebars","module","exports","template","container","depth0","helpers","partials","data","stack1","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","program","noop","lambda"],"mappings":"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","file":"main.e0051a48a0f4a11c604d.js","sourcesContent":["const baseUrl = 'https://pixabay.com/api/';\nexport default {\n  page: 1,\n  query: '',\n  key: '15807739-09fa85d701810a3ee4e99cc27',\n  fetchImages() {\n    const requestParams = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${this.key}`;\n    return fetch(baseUrl + requestParams)\n      .then(response => response.json())\n      .then(parsedResponse => {\n        this.incrementPage();\n        return parsedResponse.hits;\n      })\n      .catch(error => console.warn(error));\n  },\n \n  get serchQuery() {\n    return this.query;\n  },\n  set serchQuery(string) {\n    this.query = string;\n  },\n  incrementPage() {\n    this.page += 1;\n  },\n  resetPage() {\n    this.page = 1;\n  },\n};\n","import imageSearchServices from './services/image-search-services';\nimport * as basicLightbox from 'basiclightbox';\nimport '../../node_modules/basiclightbox/dist/basicLightbox.min.css';\nimport imageCard from '../templates/image-card.hbs';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  gallery: document.querySelector('#gallery'),\n  button: document.querySelector('button[data-action=\"load-more\"]'),\n  image: document.querySelector('#gallery_image'),\n};\n\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\nrefs.button.addEventListener('click', loadMoreBtnHandler);\nrefs.gallery.addEventListener('click', handleOriginalImage);\n\n//-------------------------------------------\n\nfunction handleOriginalImage(evt) {\n  const instance = basicLightbox.create(`\n     <img src=\"${evt.target.dataset.source}\" width=\"100%\">\n `);\n\n  instance.show();\n  console.log(evt.target.dataset.source);\n}\n//------------------------------------------\n\nfunction searchFormSubmitHandler(e) {\n  e.preventDefault();\n\n  imageSearchServices.page;\n\n  const form = e.currentTarget;\n  const input = form.elements.query;\n\n  clearListItems();\n\n  imageSearchServices.resetPage();\n  imageSearchServices.serchQuery = input.value;\n  fetchImages();\n\n  input.value = '';\n}\n\nfunction fetchImages() {\n  imageSearchServices\n    .fetchImages()\n    .then(images => {\n      insertListItems(images);\n    })\n    .catch(error => console.warn(error));\n}\n\nfunction insertListItems(images) {\n  const markup = imageCard(images);\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearListItems() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction loadMoreBtnHandler() {\n  if (imageSearchServices.page > 1) {\n    imageSearchServices.fetchImages().then(images => {\n      insertListItems(images);\n\n      window.scrollTo({\n        top: window.scrollY + 600,\n        behavior: 'smooth',\n      });\n    });\n  }\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h1>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":2,\"column\":12}}}) : helper)))\n    + \"</h1>\\r\\n<div class=\\\"country-card\\\">\\r\\n    <div class=\\\"country-description\\\">\\r\\n        <p class=\\\"country-text\\\"><strong>Capital:</strong> \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"capital\") || (depth0 != null ? lookupProperty(depth0,\"capital\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"capital\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":58},\"end\":{\"line\":6,\"column\":69}}}) : helper)))\n    + \"</p>\\r\\n        <p class=\\\"country-text\\\"><strong>Population:</strong> \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"population\") || (depth0 != null ? lookupProperty(depth0,\"population\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"population\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":61},\"end\":{\"line\":7,\"column\":75}}}) : helper)))\n    + \"</p>\\r\\n        <p class=\\\"country-text\\\"><strong>Languages:</strong></p>\\r\\n\\r\\n        <ul class=\\\"country-text\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"languages\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":12},\"end\":{\"line\":13,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"        </ul>\\r\\n    </div>\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"flag\") || (depth0 != null ? lookupProperty(depth0,\"flag\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"flag\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":14},\"end\":{\"line\":16,\"column\":22}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" class=\\\"flag\\\" width=\\\"400\\\">\\r\\n</div>\\r\\n</div>\\r\\n\\r\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <li>\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":20,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}